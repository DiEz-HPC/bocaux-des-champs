{# This file might seem a little complex, because of the high density of tags.
   It uses Twig macros and ternary selectors. Read up on them, if required:
   macros: http://twig.sensiolabs.org/doc/templates.html#macros
   ternary operators: http://twig.sensiolabs.org/doc/templates.html#other-operators
#}

{# The 'recursive' macro, for inserting one menu item. If it has a submenu, it
   invokes itself to insert the items of the submenus. #}
{% macro display_menu_item(item, loop, withsubmenus) %}
    {% from _self import display_menu_item %}
    {% apply spaceless %}
        <li class="nav-item me-sm-5">
            <a href="{{ item.link }}" title="{{ item.title }}" aria-current="page" class="nav-link {% if loop.first %}{{ 'first' }}{% elseif loop.last %}{{ 'last' }}{% endif %}{{ item|current ? ' active' }}">{{- item.label -}}</a>
        </li>
    {% endapply %}
{% endmacro %}

{# Make the macro available for use #}
{% from _self import display_menu_item %}

{% setcontent homepage = 'homepage' %}

<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="/"><img src="{{ thumbnail(homepage.logo, 150, 150)|default }}" alt="{{ homepage.logo.alt|default }}"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav text-center text-sm-start mt-5 mt-sm-0">
                {% for item in menu %}
                    {% if item.label is defined %}
                        {{ display_menu_item(item, loop, withsubmenus) }}
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
    </div>
</nav>

