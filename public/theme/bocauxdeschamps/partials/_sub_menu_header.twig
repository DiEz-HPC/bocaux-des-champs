{# This file might seem a little complex, because of the high density of tags.
   It uses Twig macros and ternary selectors. Read up on them, if required:
   macros: http://twig.sensiolabs.org/doc/templates.html#macros
   ternary operators: http://twig.sensiolabs.org/doc/templates.html#other-operators
#}

{# The 'recursive' macro, for inserting one menu item. If it has a submenu, it
   invokes itself to insert the items of the submenus. #}
{% macro display_menu_item(item, loop, withsubmenus) %}
    {% from _self import display_menu_item %}
    {% apply spaceless %}
        <a href="{{ item.uri }}" title="{{ item.title }}"
           {% if loop.class is defined or loop.first or loop.last or item|current %}class="{% if loop.first %}{{ 'first' }}{% elseif loop.last %}{{ 'last' }}{% endif %}{{ item|current ? ' active' }}"{% endif %}>{{- item.label -}}
        </a>
    {% endapply %}
{% endmacro %}

{# Make the macro available for use #}
{% from _self import display_menu_item %}

{% setcontent homepage = 'homepage' %}

{# The main menu loop: Iterates over the items, calling `display_menu_item` #}
<nav class="col-12 d-flex justify-content-around">
    <div class="col d-flex justify-content-start">
        <img src="{{ thumbnail(homepage.logo, 200, 200) }}" alt="{{ homepage.logo.alt }}">
    </div>
    <div class="col-11 d-flex align-items-center justify-content-around">
        {% for item in menu %}
            {% if item.label is defined %}
                {{ display_menu_item(item, loop, withsubmenus) }}
            {% endif %}
        {% endfor %}
    </div>
</nav>

